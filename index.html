<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Drone LogBook</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0a192f" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- Config -->
  <script src="config.js"></script>
</head>
<body>
  <header>
    <h1>Drone LogBook</h1>
    <p>Offline-first logbook. Choose Google or Microsoft.</p>
  </header>

  <main>
    <!-- Sign-in -->
    <section>
      <h2>Sign in</h2>
      <button id="btn-google">Sign in with Google</button>
      <button id="btn-microsoft">Sign in with Microsoft</button>
      <p id="signed-in-as">Not signed in</p>
    </section>

    <!-- Settings -->
    <section>
      <h2>Settings</h2>
      <label>Provider</label>
      <select id="provider">
        <option value="">— choose —</option>
        <option value="google">Google</option>
        <option value="microsoft">Microsoft</option>
      </select>

      <label>Timezone</label>
      <select id="timezone"></select>

      <div id="provider-google" class="provider-section hidden">
        <label>Google Endpoint (Apps Script URL)</label>
        <input id="google-endpoint" placeholder="https://script.google.com/macros/s/..." />
      </div>

      <div id="provider-microsoft" class="provider-section hidden">
        <label>Drive Item ID</label>
        <input id="ms-driveitem" />
        <label>Table Name</label>
        <input id="ms-table" value="FlightLogTable" />
      </div>

      <button id="btn-save-settings">Save settings</button>
    </section>

    <!-- Start Flight -->
    <section>
      <h2>New flight (Start)</h2>
      <label>Flight Name</label>
      <input id="start-flight-name" />
      <label>Project / Job</label>
      <input id="start-project" />
      <label>Start Time (Local)</label>
      <input type="datetime-local" id="start-time" />
      <button id="btn-now-start">Now</button>
      <label>Takeoff Lat</label>
      <input id="start-lat" />
      <label>Takeoff Lon</label>
      <input id="start-lon" />
      <button id="btn-gps-start">Use GPS</button>
      <button id="btn-queue-start">Queue Start</button>
    </section>

    <!-- End Flight -->
    <section>
      <h2>End flight</h2>
      <label>Flight Name</label>
      <input id="end-flight-name" />
      <label>End Time (Local)</label>
      <input type="datetime-local" id="end-time" />
      <button id="btn-now-end">Now</button>
      <button id="btn-queue-end">Queue End</button>
    </section>

    <!-- Queue -->
    <section>
      <h2>Queue & Sync</h2>
      <button id="btn-show-queue">Show Queue</button>
      <button id="btn-clear-queue">Clear Queue</button>
      <button id="btn-sync">Sync</button>
      <pre id="log-console"></pre>
    </section>
  </main>

  <script src="timezones.js"></script>
  <script src="app.js"></script>
</body>
</html>
